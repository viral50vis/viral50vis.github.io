/*! viral-50 v0.0.1 | (c) 2020 Erik BÃ¥venstrand | MIT License | https://github.com/ErikBavenstrand/DH2321-Spotify-Project */
var sliderInput=d3.select(".slider"),sliderLabels=d3.select(".slider-labels");function loadTimeSlider(){var e=Object.keys(data_attrs).filter((function(e,t){return"minimum"!==e&&"maximum"!==e&&(t==Object.keys(data_attrs).length-3||t%13==0)})).reverse();sliderLabels.selectAll("li").data(e).enter().append("li").text((function(e){d3.select(this).attr("id","week_"+weekToValue(e));var t=e.split("-"),l=parseInt(t[1],10);return(l>2&&l<=5?"Spring":l>5&&l<=8?"Summer":l>8&&l<=11?"Autumn":l>11&&l<=12||l>=0&&l<=2?"Winter":"ERROR")+" "+e.substring(2,4)})).each((function(e){var t=sliderInput.node().getBoundingClientRect().width*(155-weekToValue(e))/155-10*(155-weekToValue(e))/155;t=t+5-d3.select(this).node().getBoundingClientRect().width/2,d3.select(this).style("left",t+"px")})),sliderLabels.selectAll("li").classed("active",!0).on("click",(function(e){sliderInput.property("value",155-weekToValue(e)),updateTimeSliderStyle(weekToValue(e)),sliderInput.dispatch("input")})),sliderLabels.selectAll("#week_0").classed("active selected",!0),sliderInput.on("input",(function(){updateTimeSliderStyle(155-this.value),dataWeek=valueToWeek(155-this.value),d3.select("#week-label").text("WEEK OF "+dataWeek),updateWorldMap(data_attrs[dataWeek],data_attrs.minimum,data_attrs.maximum),changeWeekDetailView()})),sliderInput.on("keydown",(function(){switch(d3.event.keyCode){case 32:case 37:case 39:d3.event.preventDefault()}})),sliderInput.style("background","linear-gradient(to right, #1ed760 0%, #1ed760 100%, #404040 100%, #404040 100%)"),sliderInput.dispatch("input")}function updateTimeSliderStyle(e){sliderLabels.selectAll("li").classed("active selected",!1).filter((function(t){return e<=weekToValue(t)})).classed("active",!0),d3.select("#week_"+e).classed("active selected",!0);var t=100*(155-e)/155;sliderInput.style("background","linear-gradient(to right, #1ed760 0%, #1ed760 "+t+"%, #404040 "+t+"%, #404040 100%)")}